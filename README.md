# 荔荔社区 - 校园生活交友平台

## 项目简介
荔荔社区是一个面向在校大学生的校园生活社交平台，参考微博、抖音、小红书等产品，支持动态发布、互动、关注、个人主页等功能。项目采用 HTML5、CSS3 和 JavaScript 实现，注重响应式设计和良好用户体验。

---

## 最新更新记录

### 2024年12月 - 关注列表点击功能实现
- **点击进入主页**：关注列表中的用户卡片可以点击进入对应用户的个人主页
- **智能按钮显示**：访问自己的主页时显示"取消关注"按钮，访问他人主页时不显示按钮
- **用户体验优化**：添加悬停提示"点击查看主页"，增强用户交互体验
- **URL参数传递**：通过URL参数传递用户ID，支持直接访问特定用户主页
- **页面重新渲染**：点击后修改clickUser值并重新渲染个人页面内容
- **视觉反馈**：添加点击状态和悬停效果，提供良好的视觉反馈

### 2024年12月 - 用户账号初始化
- **预设账号**：添加了学习达人、摄影爱好者、校园歌手三个预设账号
- **统一密码**：所有预设账号密码均为111111c，便于测试
- **英文用户名**：使用英文用户名，符合实际使用习惯
- **完整数据**：包含学号、昵称、兴趣标签、关注列表等完整信息
- **自动初始化**：访问注册页面时自动创建预设账号，不会覆盖已有数据

### 2024年12月 - 关注列表功能完整实现
- **关注列表管理**：用户可在个人主页查看和管理关注列表
- **粉丝列表显示**：显示关注当前用户的所有粉丝
- **双向关注关系**：支持关注/取消关注，自动更新关注和粉丝数量
- **数据持久化**：关注关系存储在用户数据结构中，支持localStorage持久化
- **用户界面优化**：关注列表采用标签页设计，支持关注/取消关注操作
- **实时更新**：关注操作后立即更新列表显示和数量统计

### 2024年12月 - 评论功能完整实现
- **评论发布**：登录用户可在动态下发布评论，支持回车发送和按钮发送
- **评论展示**：评论区域可展开/收起，显示评论者头像、昵称、内容和时间
- **评论互动**：支持评论点赞功能，游客无法点赞评论
- **数据存储**：评论数据存储在动态的comments数组中，支持localStorage持久化
- **权限控制**：游客只能浏览评论，无法发布、点赞、回复评论
- **用户体验**：评论输入框实时启用/禁用发送按钮，发送成功后清空输入框

### 2024年12月 - 个人主页功能修复
- **导航栏修复**：统一个人主页导航栏结构，修复小头像悬停菜单无法显示的问题
- **编辑功能修复**：修复编辑资料模态框无法显示的问题，确保编辑按钮正常工作
- **代码优化**：删除未使用的函数和DOM元素引用，简化个人主页JavaScript代码
- **结构统一**：个人主页导航栏与其他页面保持一致，确保common.js功能正常工作
- **按钮点击修复**：修复编辑资料按钮无法点击的问题，添加z-index确保按钮可交互

### 2024年12月 - 首页动态按钮优化
- **智能按钮显示**：根据当前用户和动态发布者自动显示关注按钮或删除按钮
- **删除功能**：用户可删除自己发布的动态，支持确认提示和本地存储更新
- **关注功能**：用户可关注其他用户，支持关注状态切换和本地存储
- **用户体验优化**：删除按钮使用红色样式，关注按钮支持已关注状态显示

### 2024年12月 - 发布页面优化
- **内容区域优化**：textarea设置为不可下拉（resize: none），提升用户体验
- **功能简化**：移除添加位置功能，简化发布流程
- **代码清理**：删除位置相关的HTML、CSS和JavaScript代码
- **界面优化**：保持发布页面的简洁性和易用性

### 2024年12月 - 页面功能完善
- **头像显示修复**：统一修复各页面头像显示问题，默认使用DefaultAvatar.png
- **导航栏统一**：所有页面导航栏结构保持一致
- **动态数据优化**：个人主页动态以JSON格式存储，支持完整数据结构
- **首页布局调整**：发布栏作为独立模块，与全站动态、关注动态、推荐动态同级
- **游客状态优化**：首页刷新后游客状态正确显示为未登录状态

---

## 主要功能模块

### 1. 首页（index.html）
- 展示平台 Logo、导航菜单、动态流（全站/关注/热门）
- 游客可浏览公开动态（不可互动）
- 支持热门话题、推荐关注、侧边栏提示
- 响应式布局，适配不同设备

### 2. 用户系统
- 注册（register.html）：用户名+学号注册，表单校验，支持设置昵称、兴趣标签、头像等
- 登录（login.html）：用户名+密码登录，支持错误提示（账户不存在/密码错误）
- 个人主页（profile.html）：展示和编辑个人信息、历史动态、粉丝/关注数
- 管理员功能（admin.html）：用户管理、封禁、重置资料、删除等

### 3. 动态模块
- 发布动态（登录后）：支持图文、图片上传/外链、话题标签
- 动态流：点赞、评论、删除（仅本人）等基础操作
- 动态详情页（post.html）：展示全文、评论、时间戳

### 4. 评论系统
- **评论发布**：登录用户可在动态下发布评论，支持回车发送
- **评论展示**：评论区域可展开/收起，显示评论者信息
- **评论互动**：支持评论点赞功能，游客无法点赞
- **权限控制**：游客只能浏览评论，无法发布、点赞、回复
- **数据持久化**：评论数据存储在localStorage中，页面刷新后保持

### 5. 互动与社交
- 关注/取关，主页展示粉丝/关注人数
- 主页浏览他人动态
- 首页切换"关注动态"与"全站动态"
- 可选：私信、转发、收藏、夜间模式等

---

## 用户数据存储与模拟数据库

### 1. 本地存储（localStorage）
- 所有注册用户信息、登录状态、当前用户等均存储在浏览器 localStorage 中。
- 主要键：
  - `userList`：所有用户的数组
  - `currentUser`：当前已登录用户对象
  - `postList`：所有动态数据（包含评论）
- 每次进入登录/注册页面时，自动初始化管理员账号（admin/88888888，学号1111111111），不会覆盖已有数据。

### 2. 模拟数据库（server/user-db.json）
- 用于演示后端数据库结构，实际前端无法直接写入，仅作为数据结构参考。
- 注册时会尝试通过 fetch POST 写入 user-db.json（本地静态页面下不会真正写入，仅模拟）。

### 3. 用户数据结构
```json
{
  "id": 1750516625142,           // 唯一用户ID，注册时用Date.now()生成
  "username": "qqq111",         // 用户名（登录用）
  "studentId": "1234567899",   // 学号（10位数字）
  "nickname": "123qqq",        // 昵称
  "password": "1111111a",      // 密码（明文，演示用）
  "avatar": "...",             // 头像URL
  "interestTags": ["学习", "运动"], // 兴趣标签
  "role": "user",              // 用户角色（user/admin/guest）
  "following": [1750516625143, 1750516625144], // 关注列表（用户ID数组）
  "followers": [1750516625145, 1750516625146]  // 粉丝列表（用户ID数组）
}
```

### 4. 动态数据结构
```json
{
  "id": 1,                                    // 动态ID
  "user": {                                   // 发布者信息
    "id": 1750516625143,                      // 用户ID
    "name": "study_master",                   // 用户名
    "nickname": "学习达人",                   // 昵称
    "avatar": "src/images/DefaultAvatar.png", // 头像
    "department": "计算机学院"                // 学院
  },
  "content": "期末复习攻略分享！",            // 动态内容
  "images": ["src/images/DefaultAvatar.png"], // 图片数组
  "time": "2023-11-15T14:30:00.000Z",        // 发布时间
  "likes": 42,                               // 点赞数
  "visibility": "public",                    // 可见性：public(公开)、followers(粉丝可见)、private(私密)
  "comments": [                              // 评论数组
    {
      "id": 1703123456789,                   // 评论ID（时间戳）
      "userId": 1750516625142,               // 评论者用户ID
      "username": "admin",                   // 评论者用户名
      "nickname": "管理员",                  // 评论者昵称
      "avatar": "src/images/DefaultAvatar.png", // 评论者头像
      "content": "太棒了！期待你的表演",      // 评论内容
      "publishTime": "2023-11-15T15:00:00.000Z", // 评论时间
      "likes": 3                             // 评论点赞数
    }
  ]
}
```

### 5. 评论数据结构
```json
{
  "id": 1703123456789,                       // 评论ID（时间戳生成）
  "userId": 1750516625142,                   // 评论者用户ID
  "username": "admin",                       // 评论者用户名
  "nickname": "管理员",                      // 评论者昵称
  "avatar": "src/images/DefaultAvatar.png",  // 评论者头像
  "content": "太棒了！期待你的表演",         // 评论内容
  "publishTime": "2023-11-15T15:00:00.000Z", // 评论发布时间
  "likes": 3                                 // 评论点赞数
}
```

---

## 预设用户账号

为了方便测试和演示，系统预设了以下用户账号：

### 1. 管理员账号
- **用户名**：`admin`
- **密码**：`88888888`
- **学号**：`1111111111`
- **昵称**：管理员
- **角色**：管理员

### 2. 学习达人
- **用户名**：`study_master`
- **密码**：`111111c`
- **学号**：`2021001001`
- **昵称**：学习达人
- **学院**：计算机学院
- **兴趣标签**：学习、编程、阅读

### 3. 摄影爱好者
- **用户名**：`photo_lover`
- **密码**：`111111c`
- **学号**：`2021002001`
- **昵称**：摄影爱好者
- **学院**：艺术学院
- **兴趣标签**：摄影、艺术、旅行

### 4. 校园歌手
- **用户名**：`campus_singer`
- **密码**：`111111c`
- **学号**：`2021003001`
- **昵称**：校园歌手
- **学院**：音乐学院
- **兴趣标签**：音乐、唱歌、表演

### 账号特点
- **自动初始化**：访问注册页面时自动创建，不会覆盖已有数据
- **完整功能**：支持登录、发布动态、评论、关注等所有功能
- **测试友好**：统一密码便于测试，英文用户名符合实际使用习惯
- **数据完整**：包含完整的用户信息和预设动态内容

---

## 关注列表功能详细说明

### 1. 关注关系管理
- **双向关注**：用户A关注用户B时，A的following列表添加B的ID，B的followers列表添加A的ID
- **取消关注**：取消关注时同时从两个列表中移除对应ID
- **数据同步**：关注操作后立即更新localStorage中的用户数据
- **权限控制**：用户不能关注自己，游客无法进行关注操作

### 2. 关注列表界面
- **标签页设计**：关注和粉丝列表采用标签页切换显示
- **用户信息展示**：显示用户头像、昵称、学号等基本信息
- **操作按钮**：关注列表显示"取消关注"按钮，粉丝列表根据关注状态显示"关注"或"取消关注"
- **空状态提示**：当列表为空时显示友好的提示信息

### 3. 关注功能特点
- **实时更新**：关注/取消关注后立即更新列表显示和数量统计
- **状态同步**：首页动态中的关注按钮状态与个人主页保持一致
- **数据持久化**：关注关系存储在localStorage中，页面刷新后保持
- **用户体验**：操作后显示成功提示，支持批量管理关注列表

### 4. 技术实现
- **数据结构**：在用户对象中添加following和followers数组字段
- **事件处理**：使用事件委托处理关注/取消关注操作
- **状态管理**：实时检查关注状态并更新UI显示
- **数据验证**：确保用户ID存在且不能关注自己

---

## 评论功能详细说明

### 1. 评论交互流程
1. **展开评论**：点击动态下的"评论"按钮，评论区域展开
2. **查看评论**：显示该动态下的所有评论，包括评论者头像、昵称、内容、时间
3. **发布评论**：登录用户可在评论输入框输入内容，支持回车发送或点击发送按钮
4. **评论点赞**：登录用户可对评论进行点赞/取消点赞
5. **收起评论**：再次点击"评论"按钮可收起评论区域

### 2. 权限控制
- **游客用户**：只能浏览评论，无法发布、点赞、回复评论
- **登录用户**：可以发布评论、点赞评论、回复评论（开发中）
- **管理员**：拥有所有评论权限

### 3. 评论功能特点
- **实时更新**：评论发送后立即显示在评论列表中
- **数据持久化**：评论数据存储在localStorage中，页面刷新后保持
- **输入验证**：评论内容不能为空，发送按钮根据输入内容启用/禁用
- **用户体验**：发送成功后自动清空输入框，显示成功提示
- **响应式设计**：评论区域在不同设备上都有良好的显示效果

### 4. 技术实现
- **事件绑定**：使用事件委托和动态绑定确保评论功能正常工作
- **数据同步**：评论数据与动态数据同步更新到localStorage
- **界面更新**：评论发送后实时更新评论列表和评论数量
- **错误处理**：完善的错误提示和用户权限验证

---

## 注册与登录流程
- 注册时需填写：用户名（2-16位英文数字）、学号（10位数字）、昵称、密码、兴趣标签、头像
- 注册成功后，用户信息写入 localStorage，并尝试写入 user-db.json，页面自动跳转到登录页
- 登录时用用户名+密码，支持错误提示（账户不存在/密码错误），登录成功自动跳转首页
- 管理员账号自动初始化，无需手动注册

---

## 页面与目录结构

```
├── index.html         # 首页
├── login.html         # 登录页
├── register.html      # 注册页
├── profile.html       # 个人主页
├── post.html          # 动态详情页
├── admin.html         # 管理员后台页面
├── src/
│   ├── css/           # 样式文件（reset、通用、各页面样式）
│   └── js/            # JS 脚本（通用、各页面逻辑）
├── server/            # 后端接口（如有）
│   ├── user-db.json   # 用户数据示例
│   └── user-posts.json # 动态数据示例
├── docs/              # 项目文档
├── need.txt           # 需求说明
├── requires.md        # 功能需求与评分标准
└── user-db.json       # 模拟数据库（仅演示）
```

---

## 技术栈与开发规范
- **前端**：HTML5 + CSS3 + JavaScript（无复杂框架）
- **布局**：Flexbox、Grid，响应式设计
- **样式**：语义化标签，详细中文注释，统一主题色（Pantone 208C）
- **交互**：原生 JS 实现页面切换、表单校验、动态加载等
- **数据存储**：localStorage 本地存储，JSON 格式数据结构
- **资源优化**：图片懒加载、CSS 压缩
- **兼容性**：适配主流浏览器和移动端

---

## 运行方式
1. 直接用浏览器打开 `index.html` 即可体验全部前端功能。
2. 如需后端支持（如用户注册/登录/动态发布），请参考 `server/` 目录说明。

---

## 优化与扩展建议
- 支持更多个性化推荐、群组、签到、年度回顾等功能
- 增加夜间模式、隐私设置、动态编辑/撤回等
- 前端代码可进一步模块化、提升可维护性
- 图片与静态资源建议放置于 `src/images/` 目录
- 后端可用 Node.js/Express 或其他轻量服务实现

---

## 评分标准与参考
详见 `need.txt` 和 `requires.md`，包括功能完整性、用户体验、视觉美感、兼容性、创新亮点等。

---

## 联系与反馈
如有建议或问题，欢迎通过"关于"页面或项目文档联系开发者。

---

## 功能特性

### 核心功能
- **用户注册登录**：支持用户名、学号、昵称、密码注册，用户名登录
- **动态发布与浏览**：支持图文发布、图片上传、话题标签、可见性设置
- **评论互动**：支持评论发布、点赞、权限控制
- **关注系统**：支持关注/取消关注、关注列表管理
- **个人主页**：展示用户信息、动态、关注列表
- **管理员后台**：用户管理、内容审核、数据统计
- **分页加载**：支持分页浏览动态，智能提示加载状态

### 可见性控制
- **公开动态**：所有人可见，游客可浏览
- **粉丝可见**：仅关注者可见，需要登录并关注发布者
- **私密动态**：仅发布者可见，其他用户无法查看
- **智能过滤**：根据用户登录状态和关注关系自动过滤内容
- **视觉标识**：动态卡片显示可见性图标和文字说明
- **关注特权**：关注用户后自动获得查看其公开和粉丝可见帖子的权限

### 游客功能
- **浏览公开内容**：可查看所有公开动态和评论
- **功能限制提示**：点击受限功能时弹出友好提示
- **引导注册登录**：侧边栏显示登录注册引导

### 分页加载功能
- **智能分页**：每页显示5条动态，支持无限滚动加载
- **加载状态提示**：显示"加载中..."和"已经滑到底了"状态
- **标签页同步**：切换标签页时自动重置分页状态
- **按钮状态管理**：根据内容数量自动启用/禁用加载按钮
- **用户体验优化**：加载完成后自动更新按钮状态和样式

### 关注系统
- **关注/取消关注**：支持关注和取消关注其他用户
- **关注状态同步**：关注后所有相关帖子显示"已关注"状态
- **内容可见性**：关注用户后可看到该用户的所有公开和粉丝可见帖子
- **关注动态标签页**：专门显示关注用户的动态内容
- **双向数据更新**：关注操作同时更新关注列表和粉丝列表
- **权限控制**：游客无法关注用户，登录用户才能使用关注功能

---

> 本项目为深圳大学课程设计作品，仅供学习交流使用。 