# 荔荔社区 - 校园生活交友平台

## 项目简介
荔荔社区是一个面向在校大学生的校园生活社交平台，参考微博、抖音、小红书等产品，支持动态发布、互动、关注、个人主页等功能。项目采用 HTML5、CSS3 和 JavaScript 实现，注重响应式设计和良好用户体验。

---

## 最新更新记录

### 2024年12月 - 评论功能完整实现
- **评论发布**：登录用户可在动态下发布评论，支持回车发送和按钮发送
- **评论展示**：评论区域可展开/收起，显示评论者头像、昵称、内容和时间
- **评论互动**：支持评论点赞功能，游客无法点赞评论
- **数据存储**：评论数据存储在动态的comments数组中，支持localStorage持久化
- **权限控制**：游客只能浏览评论，无法发布、点赞、回复评论
- **用户体验**：评论输入框实时启用/禁用发送按钮，发送成功后清空输入框

### 2024年12月 - 首页动态按钮优化
- **智能按钮显示**：根据当前用户和动态发布者自动显示关注按钮或删除按钮
- **删除功能**：用户可删除自己发布的动态，支持确认提示和本地存储更新
- **关注功能**：用户可关注其他用户，支持关注状态切换和本地存储
- **用户体验优化**：删除按钮使用红色样式，关注按钮支持已关注状态显示

### 2024年12月 - 发布页面优化
- **内容区域优化**：textarea设置为不可下拉（resize: none），提升用户体验
- **功能简化**：移除添加位置功能，简化发布流程
- **代码清理**：删除位置相关的HTML、CSS和JavaScript代码
- **界面优化**：保持发布页面的简洁性和易用性

### 2024年12月 - 页面功能完善
- **头像显示修复**：统一修复各页面头像显示问题，默认使用DefaultAvatar.png
- **导航栏统一**：所有页面导航栏结构保持一致
- **动态数据优化**：个人主页动态以JSON格式存储，支持完整数据结构
- **首页布局调整**：发布栏作为独立模块，与全站动态、关注动态、推荐动态同级
- **游客状态优化**：首页刷新后游客状态正确显示为未登录状态

---

## 主要功能模块

### 1. 首页（index.html）
- 展示平台 Logo、导航菜单、动态流（全站/关注/热门）
- 游客可浏览公开动态（不可互动）
- 支持热门话题、推荐关注、侧边栏提示
- 响应式布局，适配不同设备

### 2. 用户系统
- 注册（register.html）：用户名+学号注册，表单校验，支持设置昵称、兴趣标签、头像等
- 登录（login.html）：用户名+密码登录，支持错误提示（账户不存在/密码错误）
- 个人主页（profile.html）：展示和编辑个人信息、历史动态、粉丝/关注数
- 管理员功能（admin.html）：用户管理、封禁、重置资料、删除等

### 3. 动态模块
- 发布动态（登录后）：支持图文、图片上传/外链、话题标签
- 动态流：点赞、评论、删除（仅本人）等基础操作
- 动态详情页（post.html）：展示全文、评论、时间戳

### 4. 评论系统
- **评论发布**：登录用户可在动态下发布评论，支持回车发送
- **评论展示**：评论区域可展开/收起，显示评论者信息
- **评论互动**：支持评论点赞功能，游客无法点赞
- **权限控制**：游客只能浏览评论，无法发布、点赞、回复
- **数据持久化**：评论数据存储在localStorage中，页面刷新后保持

### 5. 互动与社交
- 关注/取关，主页展示粉丝/关注人数
- 主页浏览他人动态
- 首页切换"关注动态"与"全站动态"
- 可选：私信、转发、收藏、夜间模式等

---

## 用户数据存储与模拟数据库

### 1. 本地存储（localStorage）
- 所有注册用户信息、登录状态、当前用户等均存储在浏览器 localStorage 中。
- 主要键：
  - `userList`：所有用户的数组
  - `currentUser`：当前已登录用户对象
  - `postList`：所有动态数据（包含评论）
- 每次进入登录/注册页面时，自动初始化管理员账号（admin/88888888，学号1111111111），不会覆盖已有数据。

### 2. 模拟数据库（server/user-db.json）
- 用于演示后端数据库结构，实际前端无法直接写入，仅作为数据结构参考。
- 注册时会尝试通过 fetch POST 写入 user-db.json（本地静态页面下不会真正写入，仅模拟）。

### 3. 用户数据结构
```json
{
  "id": 1750516625142,           // 唯一用户ID，注册时用Date.now()生成
  "username": "qqq111",         // 用户名（登录用）
  "studentId": "1234567899",   // 学号（10位数字）
  "nickname": "123qqq",        // 昵称
  "password": "1111111a",      // 密码（明文，演示用）
  "avatar": "...",             // 头像URL
  "interestTags": ["学习", "运动"], // 兴趣标签
  "role": "user"               // 用户角色（user/admin/guest）
}
```

### 4. 动态数据结构（JSON格式）
```json
{
  "id": 1,                                    // 动态唯一ID
  "user": {                                   // 发布者信息
    "id": 1750516625142,
    "name": "admin",
    "avatar": "src/images/DefaultAvatar.png",
    "department": "计算机学院"
  },
  "content": "今天参加了校园歌手大赛...",     // 动态内容
  "images": ["src/images/post-1.jpg"],       // 图片数组
  "time": "2023-11-15T14:30:00.000Z",        // 发布时间
  "likes": 42,                               // 点赞数
  "comments": [                              // 评论数组
    {
      "id": 1703123456789,                   // 评论ID（时间戳）
      "userId": 1750516625142,               // 评论者用户ID
      "username": "admin",                   // 评论者用户名
      "nickname": "管理员",                  // 评论者昵称
      "avatar": "src/images/DefaultAvatar.png", // 评论者头像
      "content": "太棒了！期待你的表演",      // 评论内容
      "publishTime": "2023-11-15T15:00:00.000Z", // 评论时间
      "likes": 3                             // 评论点赞数
    }
  ]
}
```

### 5. 评论数据结构
```json
{
  "id": 1703123456789,                       // 评论ID（时间戳生成）
  "userId": 1750516625142,                   // 评论者用户ID
  "username": "admin",                       // 评论者用户名
  "nickname": "管理员",                      // 评论者昵称
  "avatar": "src/images/DefaultAvatar.png",  // 评论者头像
  "content": "太棒了！期待你的表演",         // 评论内容
  "publishTime": "2023-11-15T15:00:00.000Z", // 评论发布时间
  "likes": 3                                 // 评论点赞数
}
```

---

## 评论功能详细说明

### 1. 评论交互流程
1. **展开评论**：点击动态下的"评论"按钮，评论区域展开
2. **查看评论**：显示该动态下的所有评论，包括评论者头像、昵称、内容、时间
3. **发布评论**：登录用户可在评论输入框输入内容，支持回车发送或点击发送按钮
4. **评论点赞**：登录用户可对评论进行点赞/取消点赞
5. **收起评论**：再次点击"评论"按钮可收起评论区域

### 2. 权限控制
- **游客用户**：只能浏览评论，无法发布、点赞、回复评论
- **登录用户**：可以发布评论、点赞评论、回复评论（开发中）
- **管理员**：拥有所有评论权限

### 3. 评论功能特点
- **实时更新**：评论发送后立即显示在评论列表中
- **数据持久化**：评论数据存储在localStorage中，页面刷新后保持
- **输入验证**：评论内容不能为空，发送按钮根据输入内容启用/禁用
- **用户体验**：发送成功后自动清空输入框，显示成功提示
- **响应式设计**：评论区域在不同设备上都有良好的显示效果

### 4. 技术实现
- **事件绑定**：使用事件委托和动态绑定确保评论功能正常工作
- **数据同步**：评论数据与动态数据同步更新到localStorage
- **界面更新**：评论发送后实时更新评论列表和评论数量
- **错误处理**：完善的错误提示和用户权限验证

---

## 注册与登录流程
- 注册时需填写：用户名（2-16位英文数字）、学号（10位数字）、昵称、密码、兴趣标签、头像
- 注册成功后，用户信息写入 localStorage，并尝试写入 user-db.json，页面自动跳转到登录页
- 登录时用用户名+密码，支持错误提示（账户不存在/密码错误），登录成功自动跳转首页
- 管理员账号自动初始化，无需手动注册

---

## 页面与目录结构

```
├── index.html         # 首页
├── login.html         # 登录页
├── register.html      # 注册页
├── profile.html       # 个人主页
├── post.html          # 动态详情页
├── admin.html         # 管理员后台页面
├── src/
│   ├── css/           # 样式文件（reset、通用、各页面样式）
│   └── js/            # JS 脚本（通用、各页面逻辑）
├── server/            # 后端接口（如有）
│   ├── user-db.json   # 用户数据示例
│   └── user-posts.json # 动态数据示例
├── docs/              # 项目文档
├── need.txt           # 需求说明
├── requires.md        # 功能需求与评分标准
└── user-db.json       # 模拟数据库（仅演示）
```

---

## 技术栈与开发规范
- **前端**：HTML5 + CSS3 + JavaScript（无复杂框架）
- **布局**：Flexbox、Grid，响应式设计
- **样式**：语义化标签，详细中文注释，统一主题色（Pantone 208C）
- **交互**：原生 JS 实现页面切换、表单校验、动态加载等
- **数据存储**：localStorage 本地存储，JSON 格式数据结构
- **资源优化**：图片懒加载、CSS 压缩
- **兼容性**：适配主流浏览器和移动端

---

## 运行方式
1. 直接用浏览器打开 `index.html` 即可体验全部前端功能。
2. 如需后端支持（如用户注册/登录/动态发布），请参考 `server/` 目录说明。

---

## 优化与扩展建议
- 支持更多个性化推荐、群组、签到、年度回顾等功能
- 增加夜间模式、隐私设置、动态编辑/撤回等
- 前端代码可进一步模块化、提升可维护性
- 图片与静态资源建议放置于 `src/images/` 目录
- 后端可用 Node.js/Express 或其他轻量服务实现

---

## 评分标准与参考
详见 `need.txt` 和 `requires.md`，包括功能完整性、用户体验、视觉美感、兼容性、创新亮点等。

---

## 联系与反馈
如有建议或问题，欢迎通过"关于"页面或项目文档联系开发者。

---

> 本项目为深圳大学课程设计作品，仅供学习交流使用。 